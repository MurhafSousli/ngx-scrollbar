:host {
  animation-timeline: var(--_animation-timeline-x);
  display: var(--_horizontal-thumb-display);
  background: var(--_thumb-x-color);

  height: 100%;
  width: calc(var(--thumb-size-percent) * 1%);

  // Raw thumb percent from scroll ratio
  --_thumb-size-percent-raw: calc(var(--viewport-width) / var(--content-width) * 100);

  // Min thumb size in px, converted to percentage of the track
  --_min-thumb-size-percent: calc(var(--_scrollbar-thumb-min-size) / var(--viewport-width) * 100);

  // A fixed thumb size (Not used unless --scrollbar-thumb-size is defined)
  --_fixed-thumb-size-percent: calc(var(--scrollbar-thumb-size) / var(--viewport-width) * 100);

  // Calculate thumb position
  --_scrollbar-thumb-transform-from: 0;
  --_scrollbar-thumb-transform-to: var(--_scrollbar-thumb-transform-to-value);

  &[dir="rtl"] {
    // In RTL we can move the thumb however, the logical position will go the opposite direction
    // because of this bug https://github.com/w3c/csswg-drafts/issues/4350
    // So the click and drag events won't work;
    // therefore we have to use a layout property such as "right" instead of translate
    animation-name: scrollbarThumbRTLAnimation;
    will-change: right;

    // We invert the value here to make it work for the polyfill (firefox)
    // For chrome we need different calculation
    --_scrollbar-thumb-transform-to: calc(var(--_scrollbar-thumb-transform-to-value) * -1);
  }
}

@keyframes scrollbarThumbRTLAnimation {
  from {
    right: var(--_scrollbar-thumb-transform-from);
  }
  to {
    // Calculation for chrome
    right: calc((var(--_effective-thumb-ratio) - 100 + var(--_effective-thumb-ratio) * 100) * -1%);
  }
}
